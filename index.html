<!DOCTYPE html PUBLIC
          "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content='text/html; charset=UTF-8' />
    <title id="title">PNG test</title>

    <script type="text/javascript" charset="utf-8" src="base64.js"></script>
    <script type="text/javascript" charset="utf-8" src="crc32.js"></script>
    <script type="text/javascript" charset="utf-8" src="zlib.js"></script>
    <script type="text/javascript" charset="utf-8" src="png.js"></script>

    <style type="text/css" media="screen" charset="utf-8">
	#testimg {
		background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAYAAABWKLW/AAAAPElEQVR4AQANAPL/AP8AAP//AAD//wAA/wANAPL/AAD/AP8A/wD/AP8A/wENAPL/AAAA//8AAP//AAD//1TgEe/garzJAAAAAElFTkSuQmCC");
		width: 3px;
		height: 3px;
		display: inline-block;
	}
	
	#test-png {
		border: 1px solid #CCC;
		visibility: hidden;
	}

    </style>
</head>
<body>
...
<!-- <img src="testfiles/rgb0(1).png" alt="" /> -->
<img id="png2" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAADCAYAAABWKLW/AAAAPElEQVR4AQANAPL/AP8AAP//AAD//wAA/wANAPL/AAD/AP8A/wD/AP8A/wENAPL/AAAA//8AAP//AAD//1TgEe/garzJAAAAAElFTkSuQmCC" alt="" />
<div id="testimg"></div><br />
<input type="button" id="btn" onclick="go(200, 200);" value="Go" />
<input type="text" id="out" /><br />
<br />
<img id="test-png" src="" alt="" />

<script type="text/javascript" charset="utf-8">

var go = function(w, h) {
	var w = w || 10;
	var h = h || 10;

	var img = document.getElementById('test-png');
	
	if (console && console.profile) console.profile();
	var start = new Date();

	Png.setHeader(w, h);
	Png.buildIDat();

	//console.debug(bin2hexStr(Png.IDAT, ' '));

	var base64data = Png.createFile();
	//console.debug(base64data);
	var end = new Date();
	if (console && console.profile) console.profileEnd();

	document.getElementById('out').value = (end - start) + ' ms.';

	img.style.visibility = 'visible';
	img.src = base64data;
}

</script>


{# Yandex Metrika snippet #}
<!-- Yandex.Metrika counter --><div style="display:none;"><script type="text/javascript">(function(w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter9562021 = new Ya.Metrika({id:9562021, clickmap:true}); } catch(e) { } }); })(window, "yandex_metrika_callbacks");</script></div><script src="//mc.yandex.ru/metrika/watch.js" type="text/javascript" defer="defer"></script><noscript><div><img src="//mc.yandex.ru/watch/9562021" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter -->

{# Google Analytics snippet #}
<script>
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
				(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-57408359-1', 'auto');
	ga('send', 'pageview');
</script>

</body>
</html>